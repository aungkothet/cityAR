<!doctype html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>8th Wall Sence Example</title>
  <script src="//cdn.8thwall.com/web/aframe/8frame-0.9.0.min.js"></script>
  <script src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script>
  <script
    src="//apps.8thwall.com/xrweb?appKey=gtW1JwEKcZnXsZxD8e9U6EbsmKYpj6Ynqa7bbBRL4WfYms00XsQsYhv3SUxLPex7km0qF5"></script>
  <script defer src="//cdn.8thwall.com/web/aframe/aframe-animation-component-5.1.2.min.js"></script>
  <style>
    @import url(https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,300,400,700);

    body {
      background: #333;
      color: #FFF;
      font-family: "Open Sans";
      font-weight: 300;
    }

    .typing {
      position: relative;
      line-height: 24px;
      display: inline-block;
      color: #FFF;
      min-width: 1px;
      min-height: 24px;
    }

    .typing:after {
      content: "";
      position: absolute;
      top: 5%;
      right: -2px;
      width: 1px;
      height: 90%;
      border-right: 2px solid #FFF;
      animation: blink .5s infinite ease;
    }

    @keyframes blink {
      0% {
        opacity: 0;
      }

      100% {
        opacity: 1%;
      }
    }

    div.typing {
      z-index: 10;
      width: 100%;
      position: absolute;
      top: 40%;
      padding-left: 10px;
      padding-right: 10px;
      background-color: rgba(0, 0, 0, 0.062);
      text-align: center;
      color: #FFFFFF;
      vertical-align: middle;
      user-select: none;
      display: none;
    }

    div.clear {
      z-index: 10;
      position: absolute;
      bottom: 50px;
      right: 20px;
      background-color: rgba(233, 10, 10, 0.856);
      text-align: center;
      color: #FFFFFF;
      vertical-align: middle;
      user-select: none;
    }
  </style>
  <script>
    AFRAME.registerComponent('image-target', {
      init: function () {
        const { object3D, sceneEl } = this.el
        object3D.visible = false
        // Sets the position of the frame to match the image target.
        const showImage = ({ detail }) => {
          object3D.quaternion.copy(detail.rotation)
          object3D.scale.set(detail.scale, detail.scale, detail.scale)
          object3D.position.set(detail.position.x, detail.position.y + 2, detail.position.z)
          object3D.visible = true
        }
        sceneEl.addEventListener('xrimagefound', showImage)
      }
    })

    AFRAME.registerComponent('background-sound', {
      init: function () {
        const { object3D, sceneEl } = this.el
        const audio = document.getElementById('bgSound')
        // Update the position of the frame when the image target is found or updated.
        sceneEl.addEventListener('xrimagefound', () => {
          audio.play()
        })
      }
    })

    AFRAME.registerComponent('clear-button', {
      init: function () {
        const { object3D, sceneEl } = this.el
        const clear_button = document.getElementById('clear')
        const model = document.getElementById('model')
        const audio = document.getElementById('bgSound')
        const typing_text = document.getElementById('typing')

        const clear_all = () => {
          audio.pause()
          audio.currentTime = 0
          model.setAttribute('visible', "false")
          typing_text.style.display = "none"
        }
        clear_button.onclick = clear_all
      }
    })

    AFRAME.registerComponent('typing-text', {
      init: function () {
        const { object3D, sceneEl } = this.el
        const typing_text = document.getElementById('typing')
        sceneEl.addEventListener('xrimagefound', () => {
          typing_text.style.display = "block"
        })
      }
    })

  </script>
  <script>

  </script>
</head>

<body>
  <a-scene typing-text clear-button background-sound xantialias="true" xrweb="disableWorldTracking: true"
    xrextras-almost-there xrextras-loading xrextras-runtime-error>

    <a-assets>
      <audio id="bgSound" src="./data-files/music.mp3"></audio>
      <!-- <a-sound src="./data-files/music.mp3" autoplay="false" id="bgSound"></a-sound> -->
      <a-asset-item id="phandeeyarModel" src="./data-files/Phandeeyar_Logo.glb"></a-asset-item>
    </a-assets>

    <a-camera position="0 4 10">
    </a-camera>

    <a-light type="directional" intensity="0.5" position="1 1 1"></a-light>

    <a-light type="ambient" intensity="1"></a-light>

    <a-entity image-target rotation="0 0 0" id="model"
      animation="property: rotation; to: 0 360 0; loop: true; dur: 10000">
      <a-entity gltf-model="#phandeeyarModel" scale=".03 .03 .03">
      </a-entity>
    </a-entity>
  </a-scene>
  <div id="typing" class="typing" hidden>Laravel’s task scheduling features are well documented and give you the full
    power of cron in a fluent API. The documentation covers most of what you need to get up and running with the
    scheduler quickly, however, there are a few underlying concepts I’d like to cover related to cron that will help
    solidify your understanding of how Laravel determines which scheduled tasks should run.</div>
  <div id="clear" class="clear">
    Clear
  </div>
</body>

</html>